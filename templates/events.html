<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Events</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='admin.css') }}"
    />
  </head>
  <body>
    <div class="container event-page custom-event-page">
      <div class="search-filter-container">{% include 'sidebar.html' %}</div>

      <main class="main-content">
        <h1>All Events</h1>

        <!-- ✅ Redirecting Button -->
        <button
          class="add-event-btn"
          onclick="location.href='{{ url_for('add_event_form') }}'"
        >
          Add Event
        </button>

        <div class="event-list">
          {% for event in events %}
          <div class="event-card">
            <h3>{{ event.title }}</h3>
            <p>Date: {{ event.event_date.strftime('%d %B %Y') }}</p>
            <p>Price: ₹{{ event.ticket_price }}</p>
            <p>Location: {{ event.location }}</p>
            <p>Event start time: {{ event.start_time }}</p>
            <p>Event end time: {{ event.end_time}}</p>
            <div class="event-actions">
              <a href="{{ url_for('edit_event', event_id=event.id) }}">
                <button class="edit-btn">Edit</button>
              </a>

              <form
                method="POST"
                action="{{ url_for('delete_event', event_id=event.id) }}"
              >
                <input type="hidden" name="event_id" value="{{ event.id }}" />
                <button type="submit">Delete</button>
              </form>
            </div>
          </div>
          {% endfor %}
        </div>
      </main>
    </div>

    <!-- Flash Messages Start -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %}
    <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %} {% endif %} {% endwith %}
    <!-- Flash Messages End -->
  </body>
</html>
